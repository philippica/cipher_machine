<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>焖肉面 - puzzle hunt工具集</title>
		<style>.capsule{background-color:#9eddff;width:100%;height:20px;border-radius:10px;text-align:center;margin:2px;cursor:pointer;margin:5px}.flag-shape{margin:10px;width:0;height:0;border-left:10px solid transparent;border-right:10px solid transparent;border-bottom:30px solid #000}.transparent{opacity:.1}.capsule:hover{font-weight:700;-webkit-transform:translateX(-3px);transform:translateX(-3px);transition:.5s ease}.content-area{height:fit-content}.container{width:50%}.content-area textarea{background-color:#f8f8f8;font-size:16px;margin:10px}.help-content{font-size:12px;color:#adabab;background-color:unset}#word-search-content{width:40%;height:400px}.word-content{width:80%;display:flex;flex-wrap:wrap;word-break:break-word}#word-find-similarity-hint{margin-top:30px}.word-content>div{margin:5px}.word-content>b{flex-basis:100%;font-size:20px}#footer,h1,h3{margin:40px;display:flex;justify-content:space-around}.face-container{width:fit-content;display:flex;width:100%;justify-content:space-around}#expand{width:fit-content;margin:10px}.face{height:200px;width:200px}.cube-block{background-color:gray;vertical-align:bottom;border:1px solid}#rubik-cube{border:5px solid}#piano{display:flex}.pianoWhiteKey{width:25px;height:120px;border:1px solid;margin-right:-1px;display:flex;flex-direction:column;justify-content:flex-end}.pianoBlackArea{position:absolute;display:flex;margin-left:15px}.pianoBlackKey{width:20px;height:80px;display:flex;flex-direction:column;justify-content:flex-end;border:1px solid;background-color:#000;color:#fff}.blind-dot{border-radius:50%;width:30px;height:30px;border:1px solid;margin:10px 2px 2px 10px}#blind-letter,#flag-letter{font-size:20px;margin-left:40px;margin-top:20px}.map-unit{width:25px}.map-unit input{width:22px;background-color:#80808036}.map-unit div{margin-left:4px}.sudoku-grid{width:30px;height:30px;border:2px solid;margin-right:-1px;margin-bottom:-1px}#sudokuContainer{display:flex;flex-wrap:wrap;align-content:flex-start}.sudoku-grid-content{height:26px;width:26px;margin:1px;text-align:center}.sudoku-index{z-index:-1;font-size:12;opacity:.2;position:absolute}#files,#view{margin:30px}.line{width:0;border:1px solid;height:100%;background-color:#000;position:absolute;cursor:pointer}#wave{position:absolute;width:100%;height:100%;z-index:-2}#waveContainer{height:200px;width:1000px}#frequency{height:500px;width:16380px;vertical-align:bottom;display:flex;flex-wrap:wrap;justify-content:flex-start;align-content:stretch;align-items:flex-end}#selectedArea{height:100%;position:absolute;background-color:gray;width:inherit;margin-left:2px;z-index:-1;opacity:.3}.bar{width:0;border-left:1px solid;transition:height .5s}.noteTooltip{position:relative;display:inline-block;cursor:pointer}.tooltiptext{visibility:hidden;width:120px;background-color:#000;color:#fff;text-align:center;padding:5px 0;border-radius:6px;position:absolute;z-index:1}.noteTooltip:hover .tooltiptext{visibility:visible}.form-control{font-family:monospace,monospace}#plain-code-area{font-size:x-large;margin:40px}#sudoku-upper .col-input{width:30px}#sudoku-upper{margin-bottom:10px;margin-right:0!important}#sudoku-left .row-input{height:30px;margin-left:-1px!important}#sudoku-left{margin-right:10px!important}#smart-analysis-ansers{min-height:100px;border:1px solid}.analysis-hint{color:grey;font-size:smaller}.analysis-bar{margin-left:30px}.sudoku-grid-content{position:relative}.sudoku-grid-content:after,.sudoku-grid-content:before{content:"";position:absolute;z-index:10;background:#000}.UL:before,.UR:before{left:50%;width:10%;margin-left:-5%;height:55%}.BL:after,.UL:after{top:50%;left:0;height:10%;margin-top:-5%;width:55%}.RL:after{top:50%;left:0;height:10%;margin-top:-5%;width:100%}.UB:before{left:50%;width:10%;margin-left:-5%;top:0;height:100%}.BL:before,.RB:before{left:50%;width:10%;margin-left:-5%;top:50%;height:55%}.RB:after,.UR:after{top:50%;left:45%;height:10%;margin-top:-5%;width:55%}.horizon-{width:100%;height:1px;background-color:#000;position:absolute;z-index:10;border:1px solid}.vertical-{width:1px;height:100%;background-color:#000;position:absolute;z-index:10;border:1px solid}</style>
		<link rel="stylesheet" href="./static/nonogram.css">
		<link rel="stylesheet" href="./static/bootstrap.min.css">
	</head>
	<body>
		<h1>焖肉面- puzzle hunt工具集</h1>
		<h3>正在加载所需要的资源，暂时功能不可用,请稍等片刻，如果实在太慢，可下载本页面到电脑本地使用</h3>
		<div style="text-align:center">
			常用链接:
			<a href="https://philippica.github.io/cipher_machine/cipher_sheet">常用密码表</a>
			<a href="https://www.quinapalus.com/cgi-bin/qat">QAT(非常强大的查词工具)</a>
			<a href="https://nutrimatic.org/">NUTRI(词组暴力工具)</a>
			<a href="https://www.quipqiup.com/">QUIPQIUP(自动单表暴力工具)</a>
			<a href="https://www.wordplays.com/crossword-solver">Crossword线索查询网站</a>
			<a href="https://nova.astrometry.net/">通过星空照片就能找到星座以及拍摄位置的网站</a>
		</div>
		<div class="container">
			<div id="word-container">
				<div id="word-capsule" class="capsule" data-expend="true">puzzle 字典(正则匹配、anagram、通配符、编辑距离)</div>
				<div id="word-main" class="content-area">
					<fieldset>
						<legend>选择需要筛选的类别</legend>
						<div>
							<input type="checkbox" id="all" name="all" checked="checked">
							<label for="all">全选</label>
						</div>
						<div>
						  <input type="checkbox" id="noun" name="noun" checked="checked">
						  <label for="noun">名词</label>
						</div>
						<div>
							<input type="checkbox" id="verb" name="verb" checked="checked">
							<label for="verb">动词</label>
						</div>
						<div>
							<input type="checkbox" id="adj" name="adj" checked="checked">
							<label for="adj">形容词</label>
						</div>
						<div>
							<input type="checkbox" id="adv" name="adv" checked="checked">
							<label for="adv">副词</label>
						</div>
						<div>
							<input type="checkbox" id="lowfrequcy" name="lowfrequcy" checked="checked">
							<label for="lowfrequcy">低频词</label>
						</div>
					</fieldset>
					<textarea id="one-word-content" class="form-control" placeholder="请输入要查询的单词"></textarea>
					<div id="method-select">
						<select onchange="changeMethod()" id="find-method">
							<option value="findByWildcard">通配符</option>
							<option value="findByRegularExpression">正则</option>
							<option value="contains">包含</option>
							<option value="findSimilarity">寻找相似单词(编辑距离)</option>
							<option value="findByCode">DIY写程序查找</option>
						</select>
						<div id="twoWordContainer"><span>两个词</span><input type="checkbox" id="twoWords"></div>
					</div>
					<pre id="help-content" class="help-content"></pre>
					<button id="find-words">solve</button>
					<div>以下为可能结果:</div>
					<div id="word-list-count"></div>
					<div id="words-list"></div>
				</div>
			</div>
			<div id="substitution-container">
				<div id="substitution-capsule" class="capsule" data-expend="true">单表替换</div>
				<div id="substitution-main" class="content-area" style="display:none">
					<form role="form">
						<div class="form-group">
							<div>单表暴力</div>
							<textarea id="content" class="form-control" rows="20" placeholder="请输入单表密文"></textarea>
							<div>
								<button id="substitution-solver-btn" type="button">单表暴力</button>
							</div>
						</div>
					</form>
					<div>以下为可能结果:</div>
					<div id="substitution-answer"></div>
				</div>
			</div>
			<div id="word-search-container">
				<div id="word-search-capsule" class="capsule" data-expend="true">Word Search</div>
				<div id="word-search-main" class="content-area" style="display:none">
					<div class="help-content">Word Search是一个找词游戏，给出一个n*m的字母方阵，要求在横竖斜的方向上找到英语单词</div>
					<div class="help-content">在下面文本框内填入要word search的字母方阵，例如</div>
					<div class="help-content">abc</div>
					<div class="help-content">ddf</div>
					<div class="help-content">ghi</div>
					<div>
						<textarea id="word-search-content" class="form-control" placeholder="请输出字母方阵,用空行隔开"></textarea>
						<button onclick="wordSearch()">Solver</button>
					</div>
					<div id="word-search-ansers" style="display:flex">
						<div id="word-search-ansers-list"></div>
						<div id="word-search-ansers-position" style="margin-left:40px"></div>
					</div>
				</div>
			</div>
			<div id="smart-analysis-container">
				<div id="smart-analysis-capsule" class="capsule" data-expend="true">密文智能分析</div>
				<div id="rubik-cube-main" class="content-area" style="display:none">
					<div class="help-content">请在下面文本框内输入要分析的文本, 逗号或者空格可以作为分隔符</div>
					<div>
						<textarea id="smart-analysis-content" class="form-control" rows="1" placeholder="请输出要分析的文本"></textarea>
					</div>
					<div id="smart-analysis-ansers" style="display:flex;font:15px monospace">
						<div id="smart-analysis-ansers-list"></div>
						<div id="smart-analysis-ansers-position" style="margin-left:40px"></div>
					</div>
				</div>
			</div>
			<div id="rubik-cube-container">
				<div id="rubik-cube-capsule" class="capsule" data-expend="true">魔方</div>
				<div id="rubik-cube-main" class="content-area" style="display:none">
					<div class="help-content">请拖动魔方观看所有面:</div>
					<canvas id="rubik-cube" height="300px" width="300px"></canvas>
					<button onclick="resetRubicCube()">重置魔方</button>
					<div>
						<div>顺时针</div>
						<button onclick='$("#rubic-formular").html($("#rubic-formular").html()+" F"),window.rubicCube.front(1)'>前面(F)</button>
						<button onclick='$("#rubic-formular").html($("#rubic-formular").html()+" U"),window.rubicCube.up(1)'>顶面(U)</button>
						<button onclick='$("#rubic-formular").html($("#rubic-formular").html()+" B"),window.rubicCube.back(-1)'>背面(B)</button>
						<button onclick='$("#rubic-formular").html($("#rubic-formular").html()+" D"),window.rubicCube.bottom(-1)'>底面(D)</button>
						<button onclick='$("#rubic-formular").html($("#rubic-formular").html()+" L"),window.rubicCube.left(1)'>左边(L)</button>
						<button onclick='$("#rubic-formular").html($("#rubic-formular").html()+" R"),window.rubicCube.right(-1)'>右面(R)</button>
					</div>
					<div>
						<div>逆时针</div>
						<button onclick='$("#rubic-formular").html($("#rubic-formular").html()+" F&#39;"),window.rubicCube.front(-1)'>前面(F')</button>
						<button onclick='$("#rubic-formular").html($("#rubic-formular").html()+" U&#39;"),window.rubicCube.up(-1)'>顶面(U')</button>
						<button onclick='$("#rubic-formular").html($("#rubic-formular").html()+" B&#39;"),window.rubicCube.back(1)'>背面(B')</button>
						<button onclick='$("#rubic-formular").html($("#rubic-formular").html()+" D&#39;"),window.rubicCube.bottom(1)'>底面(D')</button>
						<button onclick='$("#rubic-formular").html($("#rubic-formular").html()+" L&#39;"),window.rubicCube.left(-1)'>左边(L')</button>
						<button onclick='$("#rubic-formular").html($("#rubic-formular").html()+" R&#39;"),window.rubicCube.right(1)'>右面(R')</button>
					</div>
					<br>
					<b id="rubic-formular">公式 :</b>
					<br>
					<div class="help-content">在下面魔方展开图中可用鼠标绘制任意图案颜色(注:画笔颜色既可以是颜色英文，例如red, blue, orange, 也可是#开头的RGB,例如#FFABCD)</div>
					<label>画笔颜色</label><input id="penColor" value="black">
					<label>画笔粗细</label><input id="penWidth" value="3">
					<div id="expand"></div>
				</div>
			</div>
			<div id="music-container">
				<div id="music-capsule" class="capsule" data-expend="true">音乐</div>
				<div id="music-main" class="content-area" style="display:none">
					<div id="piano">
						<div onclick="playSound(130.81,2e3)" class="pianoWhiteKey">C3</div>
						<div onclick="playSound(146.83,2e3)" class="pianoWhiteKey">D3</div>
						<div onclick="playSound(164.81,2e3)" class="pianoWhiteKey">E3</div>
						<div onclick="playSound(174.61,2e3)" class="pianoWhiteKey">F3</div>
						<div onclick="playSound(196,2e3)" class="pianoWhiteKey">G3</div>
						<div onclick="playSound(220,2e3)" class="pianoWhiteKey">A3</div>
						<div onclick="playSound(246.94,2e3)" class="pianoWhiteKey">B3</div>
						<div onclick="playSound(261.63,2e3)" class="pianoWhiteKey">C4</div>
						<div onclick="playSound(293.66,2e3)" class="pianoWhiteKey">D4</div>
						<div onclick="playSound(329.63,2e3)" class="pianoWhiteKey">E4</div>
						<div onclick="playSound(349.23,2e3)" class="pianoWhiteKey">F4</div>
						<div onclick="playSound(392,2e3)" class="pianoWhiteKey">G4</div>
						<div onclick="playSound(440,2e3)" class="pianoWhiteKey">A4</div>
						<div onclick="playSound(493.88,2e3)" class="pianoWhiteKey">B4</div>
						<div class="pianoBlackArea">
							<div class="pianoBlackKey">C#</div>
							<div class="pianoBlackKey">D#</div>
						</div>
					</div>
				</div>
			</div>
			<div id="blind-container">
				<div id="blind-capsule" class="capsule" data-expend="true">盲文&旗语</div>
				<div id="blind-main" class="content-area" style="display:none">
					<div>盲文:</div>
					<div id="demo-blind-letter" style="margin-right:5px">
						<div style="display:flex">
							<div>
								<div class="blind-dot" data-index="0"></div>
								<div class="blind-dot" data-index="1"></div>
								<div class="blind-dot" data-index="2"></div>
							</div>
							<div>
								<div class="blind-dot" data-index="3"></div>
								<div class="blind-dot" data-index="4"></div>
								<div class="blind-dot" data-index="5"></div>
							</div>
						</div>
						<div id="blind-letter"></div>
					</div>
					<button onclick="confirmBlind()" style="margin:20px">确认</button>
					<div id="history-blind-area" style="display:flex"></div>
					<div>旗语:</div>
					<div id="demo-flag">
						<div style="display:flex">
							<div class="flag-shape" style="transform:rotate(-45deg)" data-index="0"></div>
							<div class="flag-shape" data-index="1"></div>
							<div class="flag-shape transparent" style="transform:rotate(45deg)" data-index="2"></div>
						</div>
						<div style="display:flex">
							<div class="flag-shape transparent" style="transform:rotate(-90deg)" data-index="3"></div>
							<div style="width:40px;height:50px"></div>
							<div class="flag-shape transparent" style="transform:rotate(90deg)" data-index="4"></div>
						</div>
						<div style="display:flex">
							<div class="flag-shape transparent" style="transform:rotate(-135deg)" data-index="5"></div>
							<div class="flag-shape transparent" style="transform:rotate(180deg)" data-index="6"></div>
							<div class="flag-shape transparent" style="transform:rotate(135deg)" data-index="7"></div>
						</div>
						<div id="flag-letter"></div>
					</div>
					<button onclick="confirmFlag()" style="margin:20px">确认</button>
					<div id="history-flag-area" style="display:flex"></div>
				</div>
			</div>
			<div id="cipher-container">
				<div id="cipher-capsule" class="capsule" data-expend="true">古典密码</div>
				<div id="cipher-main" class="content-area" style="display:none">
					<div id="cipher-tools">
						<button id="caeser-brute-force" style="margin:20px">暴力凯撒</button>
						<button id="QWE" style="margin:20px">QWE</button>
						<hr>
						<div id="general-substitute-cipher">
							<select onchange="changeSubstitutionMethod()" id="substitution-cipher-method">
								<option value="QWECipher">字母序(a = 1, b = 2)</option>
								<option value="QWECipher">字母序(a = 01, b = 02)</option>
								<option value="QWECipher">QWE</option>
								<option value="QWECipher">Atbash</option>
								<option value="QWECipher">5*5棋盘(i/j同格)</option>
								<option value="QWECipher">手机键盘</option>
								<option value="QWECipher">莫尔斯电码(morse code)</option>
								<option value="QWECipher">元素周期表</option>
							</select>
							<textarea id="key-textarea" class="form-control" rows="4" oninput="onTypeKey()"></textarea>
							<button onclick="encode()">编码</button>
							<button onclick="decode()">解码</button>
						</div>
						<div style="margin:10px">将<input id="replace1"> 替换成 <input id="replace2"> <button onclick="replaceStr()">替换</button></div>
						<button onclick="removeSpace()">去空格</button>
						<div><input id="spaceCnt" value="2" style="width:40px">个一组<button onclick="addSpace()">加空格</button></div>
					</div>
					<textarea id="cipher-code-textarea" class="form-control" rows="20" placeholder="请输入密文" oninput="onTypePlainCode()"></textarea>
					<div id="plain-code-area"></div>
				</div>
			</div>
			<div id="sudoku-container">
				<div id="sudoku-capsule" class="capsule" data-expend="true">数独、幻方、扫雷、nonogram、Drop Quote黑科技</div>
				<div id="sudoku-main" class="content-area" style="display:none">
					<div>
						<select id="solverMode" onchange="changeSolverMode()">
							<option value="sudoku">经典数独模式</option>
							<option value="mine">经典扫雷</option>
							<option value="magicSquare">经典幻方</option>
							<option value="nonogram">经典nonogram</option>
							<option value="drop">经典drop</option>
							<option value="simpLoop">经典simple loop</option>
							<option value="hashi">经典hashi</option>
						</select>
					</div>
					<span>行: </span> <span id="sudoku-row" style="border:1px solid" contenteditable="true">9</span>
					<span>列: </span> <span id="sudoku-col" style="border:1px solid" contenteditable="true">9</span>
					<a href="https://github.com/philippica/cipher_machine/wiki/%E7%84%96%E8%82%89%E9%9D%A2%E8%84%9A%E6%9C%AC%E6%96%87%E6%A1%A3">脚本规则说明</a>
					<div><span>显示上排</span><input type="checkbox" id="show-upper"></div>
					<div><span>显示左排</span><input type="checkbox" id="show-left"></div>
					<button id="dropHelper" style="display:none">一键生成drop成单词的规则(按黑格隔开成单词)</button>
					<div style="display:flex">
						<textarea id="rules" cols="50" rows="30"></textarea>
						<div style="margin:20px">
							<div style="display:none" id="upperRules">
								<div style="font-size:13px">上排区域中的内容将被替换为规则:</div>
								<textarea id="upReplaceStr" cols="50"></textarea>
							</div>
							<div style="display:none" id="leftRules">
								<div style="font-size:13px">左排区域中的内容将被替换为规则:</div>
								<textarea id="leftReplaceStr" cols="50"></textarea>
							</div>
							<div>
								<div style="font-size:13px">下面格子中的内容将被替换为规则:</div>
								<textarea id="replaceStr" cols="50"></textarea>
							</div>
							<div id="showcase" style="width:fit-content">
								<div id="sudoku-upper"></div>
								<div style="display:flex">
									<div id="sudoku-left"></div>
									<div id="sudokuContainer"></div>
								</div>
							</div>
							<pre id="sudokuAnswer"></pre>
						</div>
					</div>
					<button id="solveSudoku">solve</button>
				</div>
			</div>
			<div id="audio-container">
				<div id="audio-capsule" class="capsule" data-expend="true">音频文件(当你没有安装音频处理软件时)</div>
				<div id="audio-main" class="content-area" style="display:none">
					<input id="files" type="file" id="files" name="files[]" multiple="multiple">
					<input type="radio" name="linesType" id="singleLine" onchange="changeLineType()" checked="checked">只显示一条竖线(用于分析频率时用)
					<input type="radio" name="linesType" id="doubleLine" onchange="changeLineType()">显示起始和结束两条线(用于播放)
					<div style="height:200px">
						<div id="waveContainer" style="position:absolute">
							<canvas id="wave"></canvas>
							<div id="start" class="line"></div>
							<div id="selectedArea" style="display:none"></div>
							<div id="end" class="line" style="left:100%;display:none"></div>
						</div>
					</div>
					<button id="play">▶</button>
					<button onclick="analysis()">analysis</button>
					<div id="frequency"></div>
					<div id="noteOutput"></div>
				</div>
			</div>
		</div>
		<div id="footer"> power by -- philippica (Contact me: philippicapyj@gmail.com)</div>
		<script src="index-40a24493.js"></script>
		<script src="./static/jquery.min.js"></script>
		<script>if($("h3").text("字典尚在加载,部分利用到字典的功能暂不可用,请稍等片刻,如果实在太慢,可下载本页面到电脑本地使用"),localStorage.abc){window.words={};for(let e=0,t=localStorage.length;e<t;e++){const t=localStorage.key(e);words[t]=localStorage.getItem(t).split(",")}$("h3").remove()}let rubicCubeMaterias;$(".capsule").click(e=>{const t=e.target,a=$(t.parentElement.lastElementChild);a.is(":visible")?a.hide("fast","linear"):a.show("fast","linear")}),$("#rubik-cube-capsule").click(e=>{if(!window.rubicCube){const e=initExpand();rubicCubeMaterias=e;const t=document.getElementById("rubik-cube"),a=t.getContext("2d");window.rubicCube=new Solver.RubikCubeStage(a,t.width,t.height,rubicCubeMaterias)}}),$("#substitution-solver-btn").click((function(){var e=$("#content").val();console.info(e),plaintext=(new Solver.SubstitutionSolver).substituteSolver(e),$("#substitution-answer").empty(),plaintext.length;for(let e=0;e<Math.min(plaintext.length,100);e++)$("#substitution-answer").append(`<div><b>${plaintext[e]}</b></div>`)}));let solver=new Solver.OneWord;const oneWordHelpContent={findByWildcard:"当前是通配符模式 - 你可以使用#表示一个字母, 用*表示多个字母 例如 bo##ke*r 可以匹配到bookkeeper\n\t方括号[]可以用来匹配一组可能的数字，例如 booke[rd] 会同时匹配到booked和booker\n\t大写字母表示相同的一组词，例如pBAtAsBAp 第2第7个字母相同，第3,5,8个字符相同，当选两个词的时候能够匹配到photo shop",findByRegularExpression:"当前是正则表达式模式 - 如果你熟悉正则表达式，那它将会是一个非常强大的工具 例如^[abcd][ef].*[aeiou]$ 能够搜到第一个字母为abcd中一个，第二个字母为ef中一个，并且以元音结尾的所有单词\n\n例如寻找第一个字符和第四个字符相同第二个字符为b的长度为8的单词 ^(.)b.\\1....$ 解释：(其中\\1表示从左到右第一个括号需要和它相同 .代表任意字符 ^ $分别代表头和尾)\n\n例如寻找长度为4的第一个字符和第四个字符相同，第二个字符和第三个字符相同的单词: ^(.)(.)\\2\\1$\n\n例如寻找第一个字符是元音，且第一个字符和第三个字符相同，长度不定，第二个字符不可能是b或者c的单词 ^([aeiou])[^bc]\\1\n",contains:"当前是包含模式 - 能够搜出所有至少包含这些字母的单词，例如abbcc会找到所有至少包含一个a两个b和两个c的单词",findSimilarity:"当前是相似度模式-给出单词找到与它相想的单词，两个词相似度即编辑距离，如果能通过一次添加一个字母，替换一个字母或删除一个字母能从一个单词变成另一个单词，那它们的相似度为1",findByCode:"最灵活的找词方式，通过自己编写js代码，实现一个接受一个字符串作为参数的check函数来寻找单词\n函数同时会传入一个tool的参数，包含很多有用函数，当前包括:\n\tisWord(str: string) :bool : 判断传入字符串是否为英语单词\n\tanagram(str: string, letters: string) :bool : 判断传入字符串是否为letters参数中的字符排列组成"};let method="findByWildcard";$("#help-content").text(oneWordHelpContent[method]);const changeMethod=()=>{const e=$("#find-method").val();method=e,$("#word-find-similarity-hint").remove(),$("#similarityRegex").remove(),$("#similarityDegree").remove(),$("#twoWordContainer").remove(),$("#one-word-content").height(60),"findSimilarity"===method?($("#method-select").append("<input id='similarityDegree' placeholder='相似度' value='1'/>"),$("#method-select").append("<div id='word-find-similarity-hint'>在结果中用正则查找:</div><input id='similarityRegex' placeholder='正则表达式(不填则输出所有结果)' />")):"contains"===method?$("#method-select").append("<div id='word-find-similarity-hint'>在结果中用正则查找:</div><input id='similarityRegex' placeholder='正则表达式(不填则输出所有结果)' />"):"findByCode"===method?($("#one-word-content").val('function check(str, tools) {\n\tif(str[0]!=str[str.length-1])return null; // 如果首字母和尾字母不相等，不选这个单词\n\tif(str.length > 7 || str.length < 5)return null; // 如果单词长度大于7或者小于2，不选这个单词\n\tif(/^a.*b$/.test(str))return null;// 如果满足正则^a.*b$ 不选这个单词\n\tif(tools.anagram(str.substr(2,3), "guo") === false)return null; // 如果从第3个字符起往后3个字母不是由abc组成的，不选这个单词\n\tif(tools.isWord(str.substr(2,5)) === true){ // 如果单词第3个字符（因为下标从0开始)往后5个字母是一个英语单词\n\t\treturn str + " " + str.substr(2,5); //输出该词，并把第三个到第5个字母的字串放后面\n\t}\n}'),$("#one-word-content").height(400)):"findByWildcard"===method&&$("#method-select").append('<div id="twoWordContainer"><span>两个词</span><input type="checkbox" id="twoWords" /></div>'),$("#help-content").text(oneWordHelpContent[method])};$("#find-words").click((async function(){let content=$("#one-word-content").val(),answer;if($("#words-list").empty(),"contains"!==method)for(let e=20;e>=1;e--)$("#words-list").append(`<div id="len-${e}" style="display: none;" class="word-content"><b style="display: block">长度为${e}:</b></div>`);else for(let e=1;e<=20;e++)$("#words-list").append(`<div id="len-${e}" style="display: none;" class="word-content"><b style="display: block">长度为${e}:</b></div>`);let count=0;const findWord=async(e,t)=>{const a=$("#words-list #len-"+e);var n;a.is(":visible")||a.show("fast","linear"),a.append(`<div>${t}</div>`),count++,$("#word-list-count").html(`共${count}个`),count%1e3==0&&await(n=1,new Promise(e=>setTimeout(e,n)))};let filter=0;$("#noun").is(":checked")&&(filter|=1),$("#verb").is(":checked")&&(filter|=2),$("#adj").is(":checked")&&(filter|=4),$("#adv").is(":checked")&&(filter|=8),$("#lowfrequcy").is(":checked")&&(filter|=16);const solverFunc=(new Solver.OneWord)[method].bind(solver);if("findSimilarity"===method){const regex=$("#similarityRegex").val();let regularExpression;regex&&""!==regex&&(regularExpression=eval(`/${regex}/`)),findSimilarity=async(e,t)=>{regularExpression&&!regularExpression.test(t)||await findWord(e,t)};const similarityDegree=parseInt($("#similarityDegree").val());answer=await solverFunc(content,similarityDegree,findSimilarity,filter)}else if("contains"===method){const regex=$("#similarityRegex").val();let regularExpression;regex&&""!==regex&&(regularExpression=eval(`/${regex}/`)),findSimilarity=async(e,t)=>{regularExpression&&!regularExpression.test(t)||await findWord(e,t)},answer=await solverFunc(content,findSimilarity,filter)}else if("findByWildcard"===method){const e=$("#twoWords").is(":checked");answer=await solverFunc(content,findWord,filter,e)}else answer=await solverFunc(content,findWord,filter)})),wordSearch=()=>{var e=$("#word-search-content").val();console.info(e);const t=(new Solver.WordSearch).buildMatrix(e),a=(new Solver.WordSearch).wordSearch(t);a.sort((e,t)=>t.word.length-e.word.length);for(let e of a){let t="",a="";1===e.dy?t="右":-1===e.dy&&(t="左"),1===e.dx?a="下":-1===e.dx&&(a="上"),$("#word-search-ansers-list").append(`<div>${e.word}</div>`),$("#word-search-ansers-position").append(`<div>出现在第${e.x+1}行，第${e.y+1}列，向${t}${a}方向</div>`)}},initExpand=()=>{const e=[];for(let e=0;e<4;e++)$("#expand").append(`<div id="expand-${e}" class="face-container"></div>`);$("#expand-0").append('<div id="face-0" class="face"></div>'),$("#expand-1").append('<div id="face-1" class="face"></div>'),$("#expand-1").append('<div id="face-2" class="face"></div>'),$("#expand-1").append('<div id="face-3" class="face"></div>'),$("#expand-2").append('<div id="face-4" class="face"></div>'),$("#expand-3").append('<div id="face-5" class="face"></div>');const t=Math.floor($("#face-1").width()/3-4),a=Math.floor($("#face-1").height()/3-4),n=["white","green","red","blue","yellow","orange"];for(let s=0;s<6;s++)for(let l=0;l<9;l++){$("#face-"+s).append(`<canvas id="block-${9*s+l}" width="${t}px" height="${a}px" class="cube-block"></canvas>`);let i=document.getElementById("block-"+(9*s+l)),r=i.getContext("2d");r.fillStyle=n[s],r.fillRect(0,0,t,a);const o=9*s+l;r.fillStyle="black",r.font="20px Georgia",r.fillText(o.toString(),20,20),e.push(i)}return e},resetRubicCube=()=>{$("#rubic-formular").html("公式: ");const e=document.getElementById("rubik-cube"),t=e.getContext("2d");window.rubicCube=new Solver.RubikCubeStage(t,e.width,e.height,rubicCubeMaterias)};const playSound=(e,t)=>{const a=new(window.AudioContext||window.webkitAudioContext),n=a.createOscillator();n.type="sine",n.frequency.setValueAtTime(e,a.currentTime),n.connect(a.destination),n.start(),setTimeout(()=>{n.stop()},t)},currentBlindState=[0,0,0,0,0,0],braille=[];braille[1]="a",braille[3]="b",braille[9]="c",braille[25]="d",braille[17]="e",braille[11]="f",braille[27]="g",braille[19]="h",braille[10]="i",braille[26]="j",braille[5]="k",braille[7]="l",braille[13]="m",braille[29]="n",braille[21]="o",braille[15]="p",braille[31]="q",braille[23]="r",braille[14]="s",braille[30]="t",braille[37]="u",braille[39]="v",braille[58]="w",braille[45]="x",braille[61]="y",braille[53]="z",$(".blind-dot").on("click",(function(e){const t=parseInt(e.target.dataset.index);currentBlindState[t]?e.target.style.backgroundColor="":e.target.style.backgroundColor="black",currentBlindState[t]^=1;let a=0;for(let e=0;e<6;e++)a+=currentBlindState[e]*(1<<e);braille[a]?$("#blind-letter").text(braille[a]):$("#blind-letter").text("Unknown")}));const confirmBlind=()=>{$("#history-blind-area").append($("#demo-blind-letter").clone())},confirmFlag=()=>{$("#history-flag-area").append($("#demo-flag").clone())},flagState=[0,1],flagMap=[];flagMap[51]="a",flagMap[33]="b",flagMap[6]="c",flagMap[15]="d",flagMap[24]="e",flagMap[42]="f",flagMap[61]="g",flagMap[32]="h",flagMap[5]="i",flagMap[13]="j",flagMap[14]="k",flagMap[23]="l",flagMap[41]="m",flagMap[52]="n",flagMap[3]="o",flagMap[12]="p",flagMap[21]="q",flagMap[31]="r",flagMap[34]="s",flagMap[1]="t",flagMap[2]="u",flagMap[16]="v",flagMap[22]="w",flagMap[25]="x",flagMap[4]="y",flagMap[43]="z",$(".flag-shape").on("click",(function(e){const t=parseInt(e.target.dataset.index);if(flagState[0]===t||flagState[1]===t)return;e.target.style.opacity=1,$(`.flag-shape[data-index=${flagState[0]}]`)[0].style.opacity=.1,flagState[0]=flagState[1],flagState[1]=t;const a=9*Math.min(flagState[0],flagState[1])+Math.max(flagState[0],flagState[1]);console.info(a),flagMap[a]?$("#flag-letter").text(flagMap[a]):$("#flag-letter").text("Unknown")}));const caeser=(e,t)=>{let a="";for(let n of e){let e;n.charCodeAt()>=65&&n.charCodeAt()<=90?e=65:n.charCodeAt()>=97&&n.charCodeAt()<=122?e=97:a+=n,a+=String.fromCharCode((n.charCodeAt()-e+t)%26+e)}return a},removeSpace=()=>{const e=$("#cipher-code-textarea").val();$("#cipher-code-textarea").val(e.replaceAll(" ",""))},addSpace=()=>{const e=$("#cipher-code-textarea").val(),t=parseInt($("#spaceCnt").val());$("#cipher-code-textarea").val(((e,t)=>{var a,n,s=[];for(a=0,n=e.length;a<n;a+=t)s.push(e.substr(a,t));return s})(e,t).reduce((e,t)=>e+" "+t))},caeserProcess=()=>{const e=$("#cipher-code-textarea").val();$("#plain-code-area").empty();for(let t=1;t<=25;t++){const a=caeser(e,t);$("#plain-code-area").append(`<div style="display:flex;"><div>凯撒${t}： </div><div>${a}</div></div>`)}},makeMap=e=>{const t={};for(let a=0;a<26;a++)t[String.fromCharCode(a+97)]=e[a];return t};$("#caeser-brute-force").on("click",(function(e){caeserProcess()}));const replaceStr=()=>{const e=$("#cipher-code-textarea").val();$("#cipher-code-textarea").val(e.replaceAll($("#replace1").val(),$("#replace2").val()))};decodeProcess=(e,t,a)=>{e=e.trim().replaceAll("  "," ").split(" "),t=t.trim().replaceAll("  "," ").split(" ");const n=e.length,s=a||$("#cipher-code-textarea").val();let l="";for(let a=0;a<s.length;){let i=-1;for(let t=0;t<n;t++)if(s.startsWith(e[t],a)){if(-1==i){i=t;continue}e[i].length<e[t].length&&(i=t)}-1==i?(l+=s[a],a++):(a+=e[i].length,l+=t[i]+" ")}return l};const decode=()=>{const e=$("#key-textarea").val().split("\n");$("#plain-code-area").html(`<div style="display:flex;">结果: ${decodeProcess(e[1],e[0])}</div>`)},encode=()=>{const e=$("#key-textarea").val().split("\n");$("#plain-code-area").html(`<div style="display:flex;">结果: ${decodeProcess(e[0],e[1])}</div>`)},substitutionTable=["q w e r t y u i o p a s d f g h j k l z x c v b n m","a b c d e f g h i j k l m n o p q r s t u v w x y z","11 12 13 14 15 21 22 23 24 24 25 31 32 33 34 35 41 42 43 44 45 51 52 53 54 55","21 22 23 31 32 33 41 42 43 51 52 53 61 62 63 71 72 73 74 81 82 83 91 92 93 94","1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26","01 02 03 04 05 06 07 08 09 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26","0 1 2 3 4 5 6 7 8 9",".- -... -.-. -.. . ..-. --. .... .. .--- -.- .-.. -- -. --- .--. --.- .-. ... - ..- ...- .-- -..- -.-- --..","----- .---- ..--- ...-- ....- ..... -.... --... ---.. ----.","h he li be b c n o f ne na mg al si p s cl ar k ca sc ti v cr mn fe co ni cu zn ga ge as se br kr rb sr y zr nb mo tc ru rh pd ag cd in sn sb te i xe cs ba la ce pr nd pm sm eu gd tb dy ho er tm yb lu hf ta w re os ir pt au hg tl pb bi po at rn fr ra ac th pa u np pu am cm bk cf es fm md no lr rf db sg bh hs mt ds rg cn uut fl uup lv uus uuo","⠁ ⠃ ⠉ ⠙ ⠑ ⠋ ⠛ ⠓ ⠊ ⠚ ⠅ ⠇ ⠍ ⠝ ⠕ ⠏ ⠟ ⠗ ⠎ ⠞ ⠥ ⠧ ⠺ ⠭ ⠽ ⠵"],useMethod=e=>{let t="";switch(e){case 0:t+=substitutionTable[1]+"\n"+substitutionTable[4];break;case 1:t+=substitutionTable[1]+"\n"+substitutionTable[5];break;case 2:t+=substitutionTable[1]+"\n"+substitutionTable[0];break;case 3:t+=substitutionTable[1]+"\n"+substitutionTable[1].split("").reverse().join("");break;case 4:t+=substitutionTable[1]+"\n"+substitutionTable[2];break;case 5:t+=substitutionTable[1]+"\n"+substitutionTable[3];break;case 6:t+=substitutionTable[1]+" "+substitutionTable[6]+"\n"+substitutionTable[7]+" "+substitutionTable[8];break;case 7:let e="1";for(let t=2;t<=118;t++)e+=" "+t.toString();t+=e+"\n"+substitutionTable[9];break;case 8:t+=substitutionTable[1]+"\n"+substitutionTable[10]}return t},changeSubstitutionMethod=()=>{const e=$("#substitution-cipher-method")[0].selectedIndex;$("#key-textarea").val(useMethod(e))};changeSubstitutionMethod();const onTypePlainCode=e=>{if(!$("#autoDecode").get(0).checked)return;caeserProcess();let t=substituteCipher($("#cipher-code-textarea").val(),makeMap(substitutionTable[0]));$("#plain-code-area").append(`<div style="display:flex;"><div>QWE加密： </div><div>${t}</div></div>`),t=substituteCipher($("#cipher-code-textarea").val(),makeMap(substitutionTable[1])),$("#plain-code-area").append(`<div style="display:flex;"><div>QWE解密： </div><div>${t}</div></div>`),t=substituteCipher($("#cipher-code-textarea").val(),makeMap(substitutionTable[2])),$("#plain-code-area").append(`<div style="display:flex;"><div>Atbash： </div><div>${t}</div></div>`)};$("#substitution-cipher-method").ready(()=>{$("#key-textarea").val(useMethod(0))});const substituteCipher=(e,t)=>{let a=t;t||(a=$.map($(".map-unit #cipher-text"),(e,t)=>{const a={};return a[e.dataset.pt]=e.value,a}).reduce((e,t)=>Object.assign(e,t)));let n="";for(let t of e)a[t]?n+=a[t]:a[t.toLowerCase()]?n+=a[t.toLowerCase()]:n+=t;return n},solveGeneralSubstitution=()=>{const e=$("#cipher-code-textarea").val();$("#plain-code-area").empty();const t=substituteCipher(e);$("#plain-code-area").append(`<div style="display:flex;"><div>结果: </div><div>${t}</div></div>`)},autoCheckClick=e=>{$("#autoDecode").get(0).checked?($("#cipher-code-textarea")[0].style.borderColor="red",caeserProcess(),substituteCipher($("#cipher-code-textarea").val(),makeMap(substitutionTable[0]))):$("#cipher-code-textarea")[0].style.borderColor=""};let n=parseInt($("#sudoku-row").html()),m=parseInt($("#sudoku-col").html());const updateRule=(e,t,a)=>{const n="^"+e.replace(a,".*")+"$",s=$("#rules").val().split("\n");let l="";for(let e=0;e<s.length;e++)rulesWithoutSpace=s[e].replace(/\s/g,""),""!==rulesWithoutSpace&&(new RegExp(n.replace("[","\\[").replace("]","\\]")).test(rulesWithoutSpace)||(l+=rulesWithoutSpace+"\n"));""!=t&&(l+=e.replace(a,t)+"\n"),$("#rules").val(l)},generate=(e,t)=>{$("#sudokuContainer").html(""),$("#sudokuContainer").width(30*t-t),$("#sudokuContainer").height(30*e+e);for(let a=0;a<e*t;a++)$("#sudokuContainer").append(`<div class="sudoku-grid"><div class="sudoku-index">${a+1}</div><div id="grid-${a}" class="sudoku-grid-content" contenteditable="true"></div></div>`);$(".sudoku-grid-content,#sudoku-row,#sudoku-col").on("focus",(function(){before=$(this).html()})).on("blur keyup paste",(function(){before!=$(this).html()&&(before=$(this).html(),$(this).trigger("change"))})),$(".sudoku-grid-content").on("change",e=>{console.info(e.target.innerText);const t=e.target.innerText,a=parseInt(e.currentTarget.id.substr(5))+1;console.info(a);const n=$("#replaceStr").val().replace("<格子序号>",a.toString());updateRule(n,t,"<格子内容>")})},initSudoku=()=>{let e="每一格是从1到9的数字\n每一行互不相同\n每一列互不相同\n第[1,2,3,10,11,12,19,20,21]格互不相同\n第[4,5,6,13,14,15,22,23,24]格互不相同\n第[7,8,9,16,17,18,25,26,27]格互不相同\n";e+="第[28,29,30,37,38,39,46,47,48]格互不相同\n第[31,32,33,40,41,42,49,50,51]格互不相同\n第[34,35,36,43,44,45,52,53,54]格互不相同\n",e+="第[55,56,57,64,65,66,73,74,75]格互不相同\n第[58,59,60,67,68,69,76,77,78]格互不相同\n第[61,62,63,70,71,72,79,80,81]格互不相同\n第1格大于5\n",$("#replaceStr").val("第<格子序号>格是<格子内容>"),n=9,m=9,$("#rules").val("每一格是从1到9的数字\n每一行互不相同\n每一列互不相同\n第[1,2,3,10,11,12,19,20,21]格互不相同\n第[4,5,6,13,14,15,22,23,24]格互不相同\n第[7,8,9,16,17,18,25,26,27]格互不相同\n第[28,29,30,37,38,39,46,47,48]格互不相同\n第[31,32,33,40,41,42,49,50,51]格互不相同\n第[34,35,36,43,44,45,52,53,54]格互不相同\n第[55,56,57,64,65,66,73,74,75]格互不相同\n第[58,59,60,67,68,69,76,77,78]格互不相同\n第[61,62,63,70,71,72,79,80,81]格互不相同\n第1格大于5\n"),$("#sudoku-row").html(n),$("#sudoku-col").html(m),generate(n,m)},changeSolverMode=()=>{const e=$("#solverMode").val();if($("#dropHelper").css("display","none"),$("#show-upper").get(0).checked&&$("#show-upper").click(),$("#show-left").get(0).checked&&$("#show-left").click(),"sudoku"===e)initSudoku();else if("mine"===e)$("#replaceStr").val("第<格子序号>格的[本格,上,下,左,右,左上,右上,左下,右下]的黑格的数量是<格子内容>"),$("#rules").val('每一格是白格或黑格\n没填的格子默认是"第<格子序号>格的[本格,上,下,左,右,左上,右上,左下,右下]的黑格的数量是0"\n');else if("magicSquare"===e){let e="每一格是从1到16的数字\n每一格互不相同\n每一列的和是34\n每一行的和是34\n";$("#rules").val(e),n=4,m=4,$("#sudoku-row").html(n),$("#sudoku-col").html(m),$("#replaceStr").val("第<格子序号>格是<格子内容>"),generate(n,m)}else if("nonogram"===e){$("#show-upper").get(0).checked||$("#show-upper").click(),$("#show-left").get(0).checked||$("#show-left").click(),$("#upReplaceStr").val("第<列号>列从上到下连续的黑格长度是[<列序列内容>]"),$("#leftReplaceStr").val("第<行号>行从左到右连续的黑格长度是[<行序列内容>]");let e="每一格是黑格或白格\n";for(let t=1;t<=n;t++)e+=`第${t}行从左到右连续的黑格长度是[0]\n`;for(let t=1;t<=m;t++)e+=`第${t}列从上到下连续的黑格长度是[0]\n`;$("#rules").val(e)}else if("drop"===e){$("#dropHelper").css("display","unset"),$("#replaceStr").val("第<格子序号>格强制是黑格"),$("#upReplaceStr").val("第<列号>列除了黑格外的格子是[<列序列内容>]的一个排列");let e="每一格是从a到z的字母\n第5格强制是黑格\n第10格强制是黑格\n第15格强制是黑格\n第23格强制是黑格\n第28格强制是黑格\n第33格强制是黑格\n第37格强制是黑格\n第43格强制是黑格\n第46格强制是黑格\n第1列除了黑格外的格子是[i,h,t,b,e]的一个排列\n第2列除了黑格外的格子是[o,h,c,n,y]的一个排列\n第3列除了黑格外的格子是[i,l]的一个排列\n第4列除了黑格外的格子是[s,t,i,e,d]的一个排列\n第5列除了黑格外的格子是[h,s,v]的一个排列\n第6列除了黑格外的格子是[l,e,e,o]的一个排列\n第7列除了黑格外的格子是[u,g,n,n]的一个排列\n第8列除了黑格外的格子是[t,o,m,l]的一个排列\n第9列除了黑格外的格子是[o,l,u,n,w]的一个排列\n第10列除了黑格外的格子是[a,s,h,e]的一个排列\n第[1,2,3,4]格按顺序组成单词\n第[6,7,8,9]格按顺序组成单词\n第[11,12,13,14]格按顺序组成单词\n第[16,17,18,19,20,21,22]格按顺序组成单词\n第[24,25,26,27]格按顺序组成单词\n第[29,30,31,32]格按顺序组成单词\n第[34,35,36]格按顺序组成单词\n第[38,39,40,41,42]格按顺序组成单词\n第[44,45]格按顺序组成单词\n第[47,48,49,50]格按顺序组成单词\n";n=5,m=10,$("#sudoku-row").html(n),$("#sudoku-col").html(m),$("#rules").val(e),generate(n,m),$("#show-upper").get(0).checked||$("#show-upper").click()}else if("simpLoop"===e){let e="";const t=[1,18,86,154,155,222,38,123,125,91,159,260,8,59,144,195,61,112,146,197,231,282,199,63,46,32,51,68,136,286,237,220,133,99,167];for(const a of t)e+=`第${a}格是黑格\n`;e+="每一格空白的格子可以形成1条回路\n",$("#rules").val(e),n=17,m=17,$("#sudoku-row").html(n),$("#sudoku-col").html(m),generate(n,m)}else"hashi"===e&&(n=9,m=9,$("#sudoku-row").html(n),$("#sudoku-col").html(m),generate(n,m),$("#rules").val("第1格连出的线段总数为3,上下左右线段数量不超过[2,2,2,2]\n第3格连出的线段总数为3,上下左右线段数量不超过[2,2,2,2]\n第73格连出的线段总数为4,上下左右线段数量不超过[2,2,2,2]\n第30格连出的线段总数为4,上下左右线段数量不超过[2,2,2,2]\n第57格连出的线段总数为1,上下左右线段数量不超过[2,2,2,2]\n第49格连出的线段总数为4,上下左右线段数量不超过[2,2,2,2]\n第51格连出的线段总数为2,上下左右线段数量不超过[2,2,2,2]\n第81格连出的线段总数为4,上下左右线段数量不超过[2,2,2,2]\n第36格连出的线段总数为4,上下左右线段数量不超过[2,2,2,2]\n第6格连出的线段总数为1,上下左右线段数量不超过[2,2,2,2]\n第76格连出的线段总数为6,上下左右线段数量不超过[2,2,2,2]\n线段之间互不相交\n"),$("#replaceStr").val("第<格子序号>格连出的线段总数为<格子内容>,上下左右线段数量不超过[2,2,2,2]"))};$("#dropHelper").click(()=>{const e=$("#rules").val().split("\n"),t=new Set;for(const a of e)/^第\d+格.*是黑格$/.test(a)&&t.add(parseInt(a.match(/\d+/)[0]));let a="",s="";for(let e=1;e<=n*m+1;e++)if(t.has(e)||e==n*m+1){if(""==a)continue;s+=`第[${a}]格按顺序组成单词\n`,a=""}else""==a?a=e.toString():a+=","+e.toString();$("#rules").val($("#rules").val()+"\n"+s)}),$("#solveSudoku").click(async()=>{n=parseInt($("#sudoku-row").html()),m=parseInt($("#sudoku-col").html());const e=new Solver.SudokuSolver;await e.solve($("#rules").val().split("\n"),n,m,async()=>{var e;console.info("wtf"),await(e=2,new Promise(t=>setTimeout(t,e)))})});let sudokuColumnArea=[],sudokuRowArea=[];const sudokuChangeInput=e=>{const t=parseInt(e.target.innerText),a=e.target.dataset,n=parseInt(a.idx),s=parseInt(a.col),l=parseInt(a.row),i="row"===a.type?$("#sudoku-left #row-"+l).children():$("#sudoku-upper #col-"+s).children();if(a&&""!==t)"col"===a.type&&n+1===i.length?$("#sudoku-upper #col-"+a.col).prepend(`<div id="col-cell-${a.col}-${n+1}" data-type="col" data-col=${a.col} data-idx=${n+1} contenteditable="true" oninput="sudokuChangeInput(event)" class="col-input">0</div>`):"row"===a.type&&n+1===i.length&&$("#sudoku-left #row-"+a.row).prepend(`<div id="row-cell-${a.row}-${n+1}" data-type="row" data-row=${a.row} data-idx=${n+1} contenteditable="true" oninput="sudokuChangeInput(event)" class="row-input">0</div>`);else if("row"===a.type)for(;sudokuRowArea[l].length>n;)$("#sudoku-upper #row-"+a.row).children().eq(0).remove();else for(;sudokuColumnArea[s].length>n;)$("#sudoku-upper #col-"+a.col).children().eq(0).remove();var r;if("row"===a.type){let e="";for(var o=0;o<i.length;o++){const t=i[o],a=(t.dataset,t.innerText);"0"!==a&&(""===e?e=a:e+=","+a)}r=$("#leftReplaceStr").val().replace("<行号>",l+1),updateRule(r,e,"<行序列内容>")}else{let e="";for(o=0;o<i.length;o++){const t=i[o],a=(t.dataset,t.innerText);"0"!==a&&(""===e?e=a:e+=","+a)}r=$("#upReplaceStr").val().replace("<列号>",s+1),updateRule(r,e,"<列序列内容>")}},showUpper=()=>{sudokuColumnArea=[];for(let e=0;e<m;e++)sudokuColumnArea.push([]);$("#sudoku-upper").html("");for(var e=0;e<m;e++)$("#sudoku-upper").append(`<div id="col-${e}" class="col-container"></div>`),$("#sudoku-upper #col-"+e).append(`<div id="col-cell-${e}-0" data-type="col" data-col=${e} data-idx=0 contenteditable="true" oninput="sudokuChangeInput(event)" class="col-input">0</div>`);$("#upperRules").css("display","unset")};$("#show-upper").change(async()=>{$("#show-upper").get(0).checked?showUpper():($("#sudoku-upper").html(""),$("#upperRules").css("display","none"))});const showLeft=()=>{sudokuRowArea=[];for(let e=0;e<m;e++)sudokuRowArea.push([]);$("#sudoku-left").html("");for(var e=0;e<n;e++)$("#sudoku-left").append(`<div id="row-${e}" class="row-container"></div>`),$("#sudoku-left #row-"+e).append(`<div id="row-cell-${e}-0" data-type="row" data-row=${e} data-idx=0 contenteditable="true" oninput="sudokuChangeInput(event)" class="row-input">0</div>`);$("#leftRules").css("display","unset")};function Complex(e,t){this.re=e,this.im=t||0}$("#show-left").change(async()=>{$("#show-left").get(0).checked?showLeft():($("#sudoku-left").html(""),$("#leftRules").css("display","none"))}),initSudoku(),$("#sudoku-col,#sudoku-row").on("change",e=>{n=parseInt($("#sudoku-row").html()),m=parseInt($("#sudoku-col").html()),$("#show-left").get(0).checked&&showLeft(),$("#show-upper").get(0).checked&&showUpper(),generate(n,m)}),Complex.prototype.add=function(e,t){return t.re=this.re+e.re,t.im=this.im+e.im,t},Complex.prototype.sub=function(e,t){return t.re=this.re-e.re,t.im=this.im-e.im,t},Complex.prototype.mul=function(e,t){var a=this.re*e.re-this.im*e.im;return t.im=this.re*e.im+this.im*e.re,t.re=a,t},Complex.prototype.cexp=function(e){var t=Math.exp(this.re);return e.re=t*Math.cos(this.im),e.im=t*Math.sin(this.im),e},Complex.prototype.magnitude=function(){return Math.sqrt(this.re*this.re+this.im*this.im)};const changeLineType=()=>{$("#singleLine").get(0).checked?($("#selectedArea").css("display","none"),$("#end").css("display","none")):($("#selectedArea").css("display","unset"),$("#end").css("display","unset"))},Note=[["C0",16.35],["C#0/Db0",17.32],["D0",18.35],["D#0/Eb0",19.45],["E0",20.6],["F0",21.83],["F#0/Gb0",23.12],["G0",24.5],["G#0/Ab0",25.96],["A0",27.5],["A#0/Bb0",29.14],["B0",30.87],["C1",32.7],["C#1/Db1",34.65],["D1",36.71],["D#1/Eb1",38.89],["E1",41.2],["F1",43.65],["F#1/Gb1",46.25],["G1",49],["G#1/Ab1",51.91],["A1",55],["A#1/Bb1",58.27],["B1",61.74],["C2",65.41],["C#2/Db2",69.3],["D2",73.42],["D#2/Eb2",77.78],["E2",82.41],["F2",87.31],["F#2/Gb2",92.5],["G2",98],["G#2/Ab2",103.83],["A2",110],["A#2/Bb2",116.54],["B2",123.47],["C3",130.81],["C#3/Db3",138.59],["D3",146.83],["D#3/Eb3",155.56],["E3",164.81],["F3",174.61],["F#3/Gb3",185],["G3",196],["G#3/Ab3",207.65],["A3",220],["A#3/Bb3",233.08],["B3",246.94],["C4",261.63],["C#4/Db4",277.18],["D4",293.66],["D#4/Eb4",311.13],["E4",329.63],["F4",349.23],["F#4/Gb4",369.99],["G4",392],["G#4/Ab4",415.3],["A4",440],["A#4/Bb4",466.16],["B4",493.88],["C5",523.25],["C#5/Db5",554.37],["D5",587.33],["D#5/Eb5",622.25],["E5",659.25],["F5",698.46],["F#5/Gb5",739.99],["G5",783.99],["G#5/Ab5",830.61],["A5",880],["A#5/Bb5",932.33],["B5",987.77],["C6",1046.5],["C#6/Db6",1108.73],["D6",1174.66],["D#6/Eb6",1244.51],["E6",1318.51],["F6",1396.91],["F#6/Gb6",1479.98],["G6",1567.98],["G#6/Ab6",1661.22],["A6",1760],["A#6/Bb6",1864.66],["B6",1975.53],["C7",2093],["C#7/Db7",2217.46],["D7",2349.32],["D#7/Eb7",2489.02],["E7",2637.02],["F7",2793.83],["F#7/Gb7",2959.96],["G7",3135.96],["G#7/Ab7",3322.44],["A7",3520],["A#7/Bb7",3729.31],["B7",3951.07],["C8",4186.01],["C#8/Db8",4434.92],["D8",4698.63],["D#8/Eb8",4978.03],["E8",5274.04],["F8",5587.65],["F#8/Gb8",5919.91],["G8",6271.93],["G#8/Ab8",6644.88],["A8",7040],["A#8/Bb8",7458.62],["B8",7902.13]],fft=e=>{var t=e.length;if(t<=1)return e;var a=t/2,n=[],s=[];n.length=a,s.length=a;for(var l=0;l<a;++l)n[l]=e[2*l],s[l]=e[2*l+1];n=fft(n),s=fft(s);for(var i=-2*Math.PI,r=0;r<a;++r){n[r]instanceof Complex||(n[r]=new Complex(n[r],0)),s[r]instanceof Complex||(s[r]=new Complex(s[r],0));var o=new Complex(0,i*(r/t));o.cexp(o).mul(s[r],o),e[r]=n[r].add(o,s[r]),e[r+a]=n[r].sub(o,n[r])}return e};var source;function drawBuffer(e,t,a,n){var s=n.getChannelData(0),l=Math.ceil(s.length/e);a.lineWidth=.5,a.lineJoin="round",a.lineCap="round";for(var i=0;i<e;i++){for(var r=1,o=-1,d=0;d<l;d++){var c=s[i*l+d];c<r&&(r=c),c>o&&(o=c)}a.beginPath(),a.moveTo(i+.5,600*(1+r)-500),a.lineTo(i+.5,Math.max(1,600*(o-r))+600*(1+r)-500),a.stroke()}}let data,sampleRate;window.AudioContext=window.AudioContext||window.webkitAudioContext;const drawFrequency=e=>{$("#frequency").empty();let t=0;const a=[];for(let n=0;n<2e3;n++){for(;Math.abs(n*apart+apart/2-Note[t+1][1])<Math.abs(n*apart+apart/2-Note[t][1]);)t++;a.push(t),$("#frequency").append(`<div class='bar noteTooltip' style="height: ${5*e[n]}px;"><span class="tooltiptext">${n*apart} ~ ${(n+1)*apart}Hz ${Note[t][0]}</span></div>`),e[n]=[e[n],t]}e=e.sort((e,t)=>-e[0]+t[0]).slice(0,10).sort((e,t)=>e[1]-t[1]).map(e=>Note[e[1]][0]);let n="";for(let t=0,a=-1;t<10;t++)e[t]!==e[a]&&(a=t,n+=e[t]+" ");$("#noteOutput").html(n)},analysis=()=>{const e=parseInt($("#start").css("left")),t=parseInt($("#end").css("left"));$("#end").css("left",$("#start").css("left")),$("#selectedArea").css("width",0);const a=Math.min(e,t);Math.max(e,t);apart=sampleRate/16384;const n=parseInt(a/1e3*data.length);let s=[];for(let e=n;e<n+16384;e++)s.push(data[e]*(.54-.46*Math.cos(2*Math.PI*(e/16383))));let l=fft(s);const i=l.length/2;s=[],l=l.slice(0,i);for(let e=0;e<i;e++)l[e]=l[e].magnitude(),l[e][0]>35&&s.push([e*apart,e,l[e][0]]);drawFrequency(l)};let g_buf,analyser;function playAudio(e){(new window.AudioContext).decodeAudioData(e,(function(e){g_buf=e;var t=document.getElementById("wave");drawBuffer(t.width,t.height,t.getContext("2d"),e),data=e.getChannelData(0),sampleRate=e.sampleRate}))}function handleFileSelect(e){playFile(e.target.files[0])}function playFile(e){var t=new FileReader;t.onload=function(e){console.log(e.target.result),playAudio(e.target.result)},t.readAsArrayBuffer(e)}document.getElementById("files").addEventListener("change",handleFileSelect,!1),$(".line").mousedown(e=>{const t=e.clientX,a=e.target.parentElement.offsetLeft;$(e.target).css("left",t-a);let n=!0;const s=$(e.target);$(window).mousemove(e=>{if(!1===n)return;const t=parseInt($("#start").css("left")),l=parseInt($("#end").css("left")),i=Math.min(t,l),r=Math.max(t,l),o=Math.min(e.clientX-a,i);s.css("left",e.clientX-a),$("#selectedArea").css("left",o);const d=r-i;$("#selectedArea").css("width",d)}),$(window).mouseup(e=>{n=!1})});let tmp=0,apart,audioBufferSourceNode;var start=function(){const e=parseInt($("#start").css("left")),t=parseInt($("#end").css("left")),a=Math.min(e,t),n=Math.max(e,t);buffer=g_buf,audioBufferSourceNode&&audioBufferSourceNode.stop();const s=new AudioContext({sampleRate:44100});analyser=s.createAnalyser(),analyser.fftSize=16384,apart=44100/analyser.fftSize,audioBufferSourceNode=s.createBufferSource(),audioBufferSourceNode.connect(analyser),analyser.connect(s.destination),audioBufferSourceNode.buffer=buffer;const l=$("#waveContainer").width(),i=audioBufferSourceNode.buffer.duration/l*a,r=audioBufferSourceNode.buffer.duration/l*(n-a);audioBufferSourceNode.start(s.currentTime,i,r)};$("#play").click(()=>{start()});let analysisIndex=0;const morseAnalysis=(e,t,a)=>{e.append('<h4 class="analysis-hint">尝试莫斯</h4>'),e.append(`<div id="analysis-bar-${analysisIndex++}" class="analysis-bar"></div>`);let n="";const s=useMethod(6).split("\n");for(const e of t){const t=decodeProcess(s[1],s[0],e.replaceAll(a[0],".").replaceAll(a[1],"-")).trim();t.length>1?n+="*":n+=t}$("#analysis-bar-"+(analysisIndex-1)).append(`<div><b>${a[0]}为点, ${a[1]}为长:</b> ${n}</div>`),n="";for(const e of t){const t=decodeProcess(s[1],s[0],e.replaceAll(a[1],".").replaceAll(a[0],"-")).trim();t.length>1?n+="*":n+=t}$("#analysis-bar-"+(analysisIndex-1)).append(`<div><b>${a[1]}为点, ${a[0]}为长:</b> ${n}</div>`)};let folderStatus=!1;const systemAnalysis=(e,t,a)=>{const n=substitutionTable[1].split(" ");e.append('<button id="systemCheck">尝试2-36进制转10进制 +</button>'),e.append(`<div id="analysis-bar-${analysisIndex++}" class="analysis-bar folder" style="${folderStatus?"":"display: none"};"></div>`),$("#systemCheck").click(()=>{console.info("a"),$(".folder")[0].style.display=folderStatus?"none":"block",folderStatus=!folderStatus}),console.info("b");let s=2;for(let e=25,t=36;e>=0;e--,t--)if(a.includes(n[e])){s=t;break}if(2==s)for(let e=9;e>=2;e--)if(a.includes(e)){s=e+1;break}const l=$("#analysis-bar-"+(analysisIndex-1)),i=[2,3,8,16];for(let e=s;e<=36;e++){const a=t.map(t=>parseInt(t,e));l.append(`<div><b ${i.includes(e)?'style="color: red;"':""}>${e}进制:</b> ${a.join(" ")}</div>`)}},_roman={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1},romanize=e=>Object.keys(_roman).reduce((t,a)=>{for(;e>=_roman[a];)t+=a,e-=_roman[a];return t},""),deromanize=e=>{const t=new RegExp(/^M{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})$/);e=e.toUpperCase();if(!t.test(e))return!1;let a=["I","V","X","L","C","D","M"],n={I:1,V:5,X:10,L:50,C:100,D:500,M:1e3},s=0,l=0;for(let t=e.length-1;t>=0;t--)a.indexOf(e[t])>=l?s+=n[e[t]]:s-=n[e[t]],l=a.indexOf(e[t]);return s},numbersAnalysis=(e,t,a)=>{e.append('<h4 class="analysis-hint">尝试数字</h4>'),e.append(`<div id="analysis-bar-${analysisIndex++}" class="analysis-bar"></div>`);const n=$("#analysis-bar-"+(analysisIndex-1));if(0===t.filter(e=>e<=0||e>26).length){n.append('<h4 class="analysis-hint">发现所有数字都在1-26之间</h4>');const e=t.map(e=>String.fromCharCode(e+96)).join("");n.append(`<div><b>A=1..Z=26:</b> ${e}</div>`)}if(0===t.filter(e=>e<0||e>=26).length){n.append('<h4 class="analysis-hint">发现所有数字都在0-25之间</h4>');const e=t.map(e=>String.fromCharCode(e+97)).join("");n.append(`<div><b>A=0..Z=25:</b> ${e}</div>`)}if(0===t.filter(e=>e<=0||e>=255).length){n.append('<h4 class="analysis-hint">发现所有数字都在1-255之间,尝试ASCII码</h4>');const e=t.map(e=>String.fromCharCode(e)).join("");n.append(`<div><b>ASCII:</b> ${e}</div>`)}if(0===t.filter(e=>e>=118||e<=0).length){n.append('<h4 class="analysis-hint">发现所有数字都在1-118之间,尝试元素周期表</h4>');const e=useMethod(7).split("\n");let t="";for(const n of a){let a=decodeProcess(e[0],e[1],n).trim();a=a[0].toUpperCase()+a.slice(1),t+=a+" "}n.append(`<div><b>元素符号:</b> ${t}</div>`)}let s=!0,l="";for(const e of t){const t=romanize(e);if(!t||e>3999){s=!1;break}l+=t+" "}s&&n.append(`<div><b>罗马数字:</b> ${l}</div>`);if(a.filter(e=>2==e.length&&parseInt(e[0])<=5&&parseInt(e[0])>=1&&parseInt(e[1])<=5&&parseInt(e[1])>=1).length===a.length){n.append('<h4 class="analysis-hint">发现所有数字长度都为2,且都在1到5之间，尝试棋盘密码</h4>');const e=useMethod(4).split("\n");let t="";for(const n of a){t+=decodeProcess(e[1],e[0],n).trim()}$("#analysis-bar-"+(analysisIndex-1)).append(`<div><b>5*5棋盘</b> ${t}</div>`)}},summaryAnalysis=(e,t)=>{e.append('<h4 class="analysis-hint">综合分析</h4>'),e.append(`<div id="analysis-bar-${analysisIndex++}" class="analysis-bar"></div>`);const a=$("#analysis-bar-"+(analysisIndex-1));a.append(`<div>共${t.length}个字符, 详细统计</div>`);const n={};for(let e=0;e<t.length;e++)n[t[e]]=(n[t[e]]||0)+1;const s=Object.entries(n);for(const e of s)a.append(`<div>${e[0]}: ${e[1]}</div>`)},binaryAnalysis=(e,t,a)=>{let n="";e.append('<h4 class="analysis-hint">尝试二进制</h4>'),e.append(`<div id="analysis-bar-${analysisIndex++}" class="analysis-bar"></div>`);const s=$("#analysis-bar-"+(analysisIndex-1));let l=[];for(const e of t){const t=parseInt(e.replaceAll(a[0]," ").replaceAll(a[1],"0").replaceAll(" ","1"),2);l.push(t),n+=t.toString()+" "}s.append(`<div><b>若${a[0]}为1, ${a[1]}为0:</b> ${n}</div>`),s.append(`<div id="analysis-bar-${analysisIndex++}" class="analysis-bar"></div>`),numbersAnalysis($("#analysis-bar-"+(analysisIndex-1)),l,l.map(e=>e.toString())),n="",l=[];for(const e of t){const t=parseInt(e.replaceAll(a[1]," ").replaceAll(a[0],"0").replaceAll(" ","1"),2);l.push(t),n+=t.toString()+" "}s.append(`<div><b>若${a[1]}为1, ${a[0]}为0:</b> ${n}</div>`),s.append(`<div id="analysis-bar-${analysisIndex++}" class="analysis-bar"></div>`),numbersAnalysis($("#analysis-bar-"+(analysisIndex-1)),l,l.map(e=>e.toString()))},elementsAnalysis=(e,t)=>{e.append('<h4 class="analysis-hint">元素序号</h4>'),e.append(`<div id="analysis-bar-${analysisIndex++}" class="analysis-bar"></div>`);const a=$("#analysis-bar-"+(analysisIndex-1));let n=[],s="";const l=useMethod(7).split("\n");for(const e of t){const t=decodeProcess(l[1],l[0],e).trim();s+=t+" ",n.push(t)}a.append(`<div><b>元素序号:</b> ${s}</div>`),numbersAnalysis(a,n.map(e=>parseInt(e)),n)},lettersAnalysis=(e,t,a)=>{let n=useMethod(0).split("\n");e.append(`<div><b>字母序(a = 1, z = 26): </b>${decodeProcess(n[0],n[1],t)}</div>`),n=useMethod(2).split("\n"),e.append(`<div><b>QWE编码(a = q): </b>${a.map(e=>decodeProcess(n[0],n[1],e).replaceAll(" ","")).join(" ")}</div>`),n=useMethod(2).split("\n"),e.append(`<div><b>QWE解码(q = a): </b>${a.map(e=>decodeProcess(n[1],n[0],e).replaceAll(" ","")).join(" ")}</div>`),n=useMethod(3).split("\n"),e.append(`<div><b>Atbash: </b>${a.map(e=>decodeProcess(n[0],n[1],e).replaceAll(" ","")).join(" ")}</div>`),n=useMethod(6).split("\n"),e.append(`<div><b>莫斯编码: </b>${a.map(e=>decodeProcess(n[0],n[1],e)).join(" ")}</div>`),n=useMethod(8).split("\n"),e.append(`<div><b>盲文: </b>${a.map(e=>decodeProcess(n[0],n[1],e).replaceAll(" ","")).join(" ")}</div>`),e.append('<h4 class="analysis-hint">凯撒移位(暴力)</h4>'),e.append(`<div id="analysis-bar-${analysisIndex++}" class="analysis-bar"></div>`);const s=$("#analysis-bar-"+(analysisIndex-1));for(let e=1;e<26;e++)s.append(`<div><b>移动${e}位: </b> ${caeser(t,e)}</div>`)};$("#smart-analysis-content").on("keyup paste",()=>{analysisIndex=0;const e=$("#smart-analysis-ansers-list");e.html("");const t=$("#smart-analysis-content").val(),a=t.trim().toLowerCase(),n=a.split(/[\s,]+/),s={},l=[];let i=0,r=!0;const o=substitutionTable[9].split(" ");let d=!0,c=!0;for(const e of n){for(let t=0;t<e.length;t++)void 0===s[e[t]]?(s[e[t]]=1,l.push(e[t]),i++):s[e[t]]++;/^-?\d+$/.test(e)||(r=!1),o.includes(e)||(d=!1),!1===/^[a-zA-Z]*$/.test(e)&&(c=!1)}if(i<=2){e.append(`<div class="analysis-hint">只有两个字符, 开始二值分析</div><div id="analysis-bar-${analysisIndex++}" class="analysis-bar"></div`);const t=analysisIndex-1;morseAnalysis($("#analysis-bar-"+t),n,l),binaryAnalysis($("#analysis-bar-"+t),n,l)}if(r&&numbersAnalysis(e,n.map(e=>parseInt(e)),n),d){e.append('<div class="analysis-hint">全部为元素符号, 开始元素符号分析</div>'),e.append(`<div id="analysis-bar-${analysisIndex++}" class="analysis-bar"></div>`);elementsAnalysis($("#analysis-bar-"+(analysisIndex-1)),n)}if(c){let t="",s=!0;const l=[];for(const e of n){const a=deromanize(e);if(!a){s=!1;break}l.push(a),t+=a.toString()+" "}if(s){e.append('<div class="analysis-hint">全部为罗马数字</div>'),e.append(`<div id="analysis-bar-${analysisIndex++}" class="analysis-bar"></div>`);const a=$("#analysis-bar-"+(analysisIndex-1));a.append(`<div><b>罗马数字:</b>${t}</div>`),numbersAnalysis(a,l,l.map(e=>e.toString()))}e.append('<div class="analysis-hint">全部为字母, 开始加密分析</div>'),e.append(`<div id="analysis-bar-${analysisIndex++}" class="analysis-bar"></div>`);lettersAnalysis($("#analysis-bar-"+(analysisIndex-1)),a,n)}e.append(`<div><b>倒序:</b>${Array.from(t).reverse().join("")}</div>`),systemAnalysis(e,n,a),summaryAnalysis(e,t)})</script>
		<script src="./static/dict.v1.0.min.js"></script>
		<script>if(!localStorage.abc){for(const o in words)localStorage.setItem(o,words[o]);solver=new Solver.OneWord,$("h3").remove()}</script>
		<script src="./out.js"></script>
		
	</body>
</html>
